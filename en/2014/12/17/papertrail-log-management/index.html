<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>The Papertrail App | Solitary Pursuits</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <link rel="shortcut icon" href="/favicon.ico">
  <link rel="stylesheet" href="/css/app.css">
  <!-- <link rel='stylesheet' href='http://fonts.useso.com/css?family=Source+Code+Pro'> -->
  
</head>

<body>
  <nav class="app-nav">
  
    
      <a href="/.">home</a>
    
  
    
      <a href="/archives">archive</a>
    
  
    
      <a href="/atom.xml">rss</a>
    
  
</nav>

  <main class="post">
  <article>
  <h1 class="article-title">
    <a href="/en/2014/12/17/papertrail-log-management/">The Papertrail App</a>
  </h1>

  <section class="article-meta">
    <p class="article-date">December 17 2014</p>
  </section>

  <section class="article-entry">
    <h3>Managing Logs has never been so easy</h3>
<p>PaperTrail lets you track changes to your models' data. It's good for auditing or versioning. You can see how a model looked at any stage in its lifecycle, revert it to any version, and even undelete it after it's been destroyed.</p>
<h4>Steps to Activate Papertrail For your project</h4>
<ul>
<li>
<p>Signup an  account credentials with <a href="https://papertrailapp.com/" target="_blank" rel="external">papertrail website</a>.</p>
</li>
<li>
<p>Next you will be directed to you profile page where you will find an option stating you to Add your First System.
Enable it and you will be redirect you to next page.</p>
</li>
<li>
<p>Once you are redirected to this page papertrail will give you an individual port to view you Logs which will be similar to this.</p>
<p>Your systems will log to
<figure class="highlight css"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="selector-tag">logs2</span><span class="selector-class">.papertrailapp</span><span class="selector-class">.com</span><span class="selector-pseudo">:port_number</span></div></pre></td></tr></table></figure></p>
</li>
<li>
<p>By default check the Logger your system has by executing this syntax
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">ls <span class="_">-d</span> /etc/*syslog*</div></pre></td></tr></table></figure></p>
</li>
<li>
<p>In terminal run:
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">vi /etc/rsyslog.conf</div></pre></td></tr></table></figure>
Add the line:
<figure class="highlight css"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="selector-tag">logs2</span><span class="selector-class">.papertrailapp</span><span class="selector-class">.com</span><span class="selector-pseudo">:port_number</span></div></pre></td></tr></table></figure></p>
</li>
<li>
<p>Restart you syslog using:
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">sudo service rsyslog restart</div></pre></td></tr></table></figure></p>
</li>
<li>
<p>Once the syslog is rebooted your logs can be seen at
<figure class="highlight css"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="selector-tag">logs2</span><span class="selector-class">.papertrailapp</span><span class="selector-class">.com</span><span class="selector-pseudo">:port_number</span></div></pre></td></tr></table></figure></p>
</li>
<li>
<p>Visit your Events from paper trail account to view all the logs.</p>
</li>
</ul>
<p>Now, it logs all the logs that your system is logging.</p>
<hr>
<p>For logging laravel logs(which we will be doing here) or similar external log files, you will need to transfer the files to syslog.</p>
<p>For setting up Laravel logs, you can one of many services to transfer the laravel logs to syslog. We will be using Monolog to serve our purpose.</p>
<h4>Steps to setup laravel logs in papertrail:</h4>
<ul>
<li>
<p>Install Monolog using composer:
<figure class="highlight php"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">composer <span class="keyword">require</span> monolog/monolog</div></pre></td></tr></table></figure></p>
</li>
<li>
<p>Replace the code in app/start/global.php :
<figure class="highlight php"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">$monolog = Log::getMonolog();</div><div class="line">$monolog-&gt;pushHandler(<span class="keyword">new</span> Monolog\Handler\SyslogHandler(<span class="string">'keyword'</span>));</div></pre></td></tr></table></figure></p>
</li>
</ul>
<p>Keyword can be set to whatever we want. And in the papertrail log system it will show up as a program of such name.</p>
<p>And we are all set to go.</p>
<hr>
<p>Now, suppose you want to setup email notifications too. Who has time to go through all the logs and then view all the boring 404 errors on the papertrail events. Event though it is simple. Pun intended ;) So, papertrail knows how lazy a programmer can get. You set up a search alert. And configure to deliver mails on all the logs at a regular interval of time. Generally, it's better to put up as a 24 hour notice, hence pointing out the clear distribution time to check the logs just before sleep.</p>
<h4>Now, to set-up alerts,</h4>
<ol>
<li>Go to your Events page, where all the logs are being shown. Search something. Probably by some keyword or some program name or anything random you wish for.</li>
<li>Click on Save your search and then choose to configure it.</li>
<li>You will be redirected to a new page where you can set your alert via various services. Choose any one of them and you are set.</li>
<li>If you want email notifications, click on Email and enter the email addresses you want the logs to go to. You can feed in multiple emails also by separating with a comma(,).</li>
<li>Choose what interval you wish for and start your alert system.</li>
</ol>
<p>To test if the alarm works, just Click on Test mode button, which send mail to the email ids provided of the saved search.</p>
<p>Ta da! A full setup of papertrail is now complete.</p>
<hr>
<p>You can do plenty more with papertrail.. Keep digging.. Happy Coding!! :)</p>
<p>For further reading, you can go through the <a href="http://help.papertrailapp.com/" target="_blank" rel="external">official documentation</a>.</p>

  </section>
</article>

  <div class="sharing grid">
  <section class="profile grid-item grid">
    <img class="avatar" src="http://i.imgur.com/OXCWwy7.jpg" alt="avatar" />
    <div class="grid-item">
      <p class="title"> Solitary Pursuits </p>
      <p class="subtitle"> Solitary Pursuits in the New World </p>
    <div>
  </section>

  <section class="share-btns">
    <!-- <p> share it if you like it~ </p> -->
    <a
  class="twitter-share-button"
  data-size="large"
  data-via="kranirudha"
  href="https://twitter.com/intent/tweet?text=>Managing Logs has n"
>
  Tweet
</a>

<script>
  window.twttr = (function(d, s, id) {
  var js, fjs = d.getElementsByTagName(s)[0],
    t = window.twttr || {};
  if (d.getElementById(id)) return t;
  js = d.createElement(s);
  js.id = id;
  js.src = "https://platform.twitter.com/widgets.js";
  js.async = true;
  fjs.parentNode.insertBefore(js, fjs);

  t._e = [];
  t.ready = function(f) {
    t._e.push(f);
  };

  return t;
}(document, "script", "twitter-wjs"));
</script>

  </section>
</div>


  
    
<section class="article-comment">
  <div id="disqus_thread">
    <noscript>Please enable JavaScript to view the <a href="//disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
  </div>
</section>

<script>
  var disqus_shortname = 'anistark';
  
  var disqus_url = 'http://blog.anirudha.org/en/2014/12/17/papertrail-log-management/';
  
  (function(){
    var dsq = document.createElement('script');
    dsq.type = 'text/javascript';
    dsq.async = true;
    dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
  })();
</script>


  
</main>

</body>
</html>
